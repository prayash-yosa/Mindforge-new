<!DOCTYPE html><html><head><meta charset="utf-8"><title>Task 3.4 — GET /student/results/:type/:id (Activity Results)</title><style>body{font-family:system-ui;max-width:900px;margin:2rem auto;padding:0 1rem;line-height:1.6}code{background:#f4f4f4;padding:2px 6px;border-radius:3px}pre{background:#f4f4f4;padding:1rem;overflow-x:auto;border-radius:6px}table{border-collapse:collapse;width:100%}th,td{border:1px solid #ddd;padding:8px;text-align:left}th{background:#f8f8f8}</style></head><body><h1>Task 3.4 — GET /student/results/:type/:id (Activity Results)</h1>
<p><strong>Sprint</strong>: 3 — Today's Plan &amp; Activities API
<strong>Status</strong>: Done
<strong>Date</strong>: 2026-02-13
<strong>Estimate</strong>: 1 SP</p>
<hr />
<h2>Checklist</h2>
<ul>
<li>[x] <code>GET /v1/student/results/:type/:id</code> returns score, per-question breakdown (correct/incorrect), and suggested next activities; auth; scoped by student_id.</li>
<li>[x] Response shape supports UX: score display, list of question results, suggested next task cards.</li>
</ul>
<hr />
<h2>Implementation</h2>
<h3>GET /v1/student/results/:type/:id</h3>
<p><strong>Response shape</strong>:</p>
<pre><code class="language-json">{
  &quot;activityId&quot;: &quot;uuid&quot;,
  &quot;type&quot;: &quot;homework&quot;,
  &quot;title&quot;: &quot;Ch 3 — Linear Equations in One Variable&quot;,
  &quot;status&quot;: &quot;completed&quot;,
  &quot;totalQuestions&quot;: 3,
  &quot;answeredQuestions&quot;: 3,
  &quot;correctAnswers&quot;: 2,
  &quot;score&quot;: 67,
  &quot;breakdown&quot;: [
    { &quot;questionId&quot;: &quot;uuid&quot;, &quot;isCorrect&quot;: true, &quot;score&quot;: 100 },
    { &quot;questionId&quot;: &quot;uuid&quot;, &quot;isCorrect&quot;: false, &quot;score&quot;: 0 },
    { &quot;questionId&quot;: &quot;uuid&quot;, &quot;isCorrect&quot;: true, &quot;score&quot;: 100 }
  ],
  &quot;suggestedNext&quot;: [
    { &quot;type&quot;: &quot;quiz&quot;, &quot;title&quot;: &quot;Practice quiz&quot;, &quot;reason&quot;: &quot;Good effort — practice more to master the topic.&quot; }
  ]
}
</code></pre>
<p><strong>Suggested next logic</strong> (deterministic, based on score):
| Score Range | Suggestion |
|-------------|------------|
| &lt; 60% | <code>gap_bridge</code>: "Review weak areas — score below 60%" |
| 60–89% | <code>quiz</code>: "Practice more to master the topic" |
| &gt;= 90% | <code>homework</code>: "Excellent — move to next topic" |</p>
<p><strong>Edge cases</strong>:
- Activity not found → 404
- No responses yet → <code>score: null</code>, <code>suggestedNext: []</code></p>
<hr />
<h2>Files Modified/Created</h2>
<table>
<thead>
<tr>
<th>File</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>src/modules/activities/activities.controller.ts</code></td>
<td>Updated: <code>getResult()</code> endpoint</td>
</tr>
<tr>
<td><code>src/modules/activities/activities.service.ts</code></td>
<td>Updated: <code>getResult()</code> with suggestedNext logic</td>
</tr>
</tbody>
</table>
<hr />
<h2>Verification</h2>
<pre><code>GET /v1/student/results/homework/:id → 200: score=67, 2 correct / 3 total, suggested &quot;Practice quiz&quot;
GET /v1/student/results/homework/00000000-... → 404 ACTIVITY_NOT_FOUND
</code></pre></body></html>